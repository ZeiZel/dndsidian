import React, { useState } from 'react';
import { Steps, Card, Button, Space } from 'antd';
import { motion, AnimatePresence } from 'framer-motion';
import {
	BookOutlined,
	CommentOutlined,
	SearchOutlined,
	FireOutlined,
	TrophyOutlined,
	LeftOutlined,
	RightOutlined,
} from '@ant-design/icons';
import './GameplayGuide.css';

const { Step } = Steps;

interface GameStep {
	title: string;
	icon: React.ReactNode;
	description: string;
	example: {
		dm?: string;
		player?: string;
		action?: string;
	}[];
}

const gameSteps: GameStep[] = [
	{
		title: '–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞',
		icon: <BookOutlined />,
		description:
			'–ú–∞—Å—Ç–µ—Ä –≥–æ—Ç–æ–≤–∏—Ç —Å–µ—Å—Å–∏—é: –ø—Ä–æ–¥—É–º—ã–≤–∞–µ—Ç —Å—Ü–µ–Ω—ã, –≥–æ—Ç–æ–≤–∏—Ç –∫–∞—Ä—Ç—ã, –º—É–∑—ã–∫—É –∏ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ –≤—Ä–∞–≥–æ–≤. –ò–≥—Ä–æ–∫–∏ –≤—Å–ø–æ–º–∏–Ω–∞—é—Ç —Å–æ–±—ã—Ç–∏—è –ø—Ä–æ—à–ª–æ–π —Å–µ—Å—Å–∏–∏ –∏ –ø—Ä–æ–≤–µ—Ä—è—é—Ç —Å–≤–æ–∏ –ª–∏—Å—Ç—ã –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π.',
		example: [
			{
				action:
					'üé≤ –ú–∞—Å—Ç–µ—Ä –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –∑–∞–º–µ—Ç–∫–∏, –∑–∞–≥—Ä—É–∂–∞–µ—Ç –∫–∞—Ä—Ç—É —Ç–∞–≤–µ—Ä–Ω—ã –≤ Foundry VTT –∏ –≤–∫–ª—é—á–∞–µ—Ç —Ñ–æ–Ω–æ–≤—É—é –º—É–∑—ã–∫—É',
			},
			{
				action: 'üìù –ò–≥—Ä–æ–∫–∏ –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—é—Ç —Å–≤–æ–∏ –ª–∏—Å—Ç—ã –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π –∏ –≤—Å–ø–æ–º–∏–Ω–∞—é—Ç –∞–∫—Ç–∏–≤–Ω—ã–µ –∫–≤–µ—Å—Ç—ã',
			},
		],
	},
	{
		title: '–í–≤–µ–¥–µ–Ω–∏–µ',
		icon: <CommentOutlined />,
		description:
			'–ú–∞—Å—Ç–µ—Ä –∫—Ä–∞—Ç–∫–æ –ø–µ—Ä–µ—Å–∫–∞–∑—ã–≤–∞–µ—Ç —Å–æ–±—ã—Ç–∏—è –ø—Ä–æ—à–ª–æ–π —Å–µ—Å—Å–∏–∏ –∏ –æ–ø–∏—Å—ã–≤–∞–µ—Ç —Ç–µ–∫—É—â—É—é —Å–∏—Ç—É–∞—Ü–∏—é. –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è —Ü–µ–ª—å —Å–µ—Å—Å–∏–∏ –∏ —Å–æ–∑–¥–∞—ë—Ç—Å—è –Ω—É–∂–Ω–∞—è –∞—Ç–º–æ—Å—Ñ–µ—Ä–∞.',
		example: [
			{
				dm: '–ò—Ç–∞–∫, –Ω–∞ –ø—Ä–æ—à–ª–æ–π —Å–µ—Å—Å–∏–∏ –≤—ã –ø—Ä–∏–±—ã–ª–∏ –≤ –≥–æ—Ä–æ–¥ –ò–≤–æ–≤–∞—è –õ–æ—â–∏–Ω–∞ –∏ —É–∑–Ω–∞–ª–∏ –æ —Ç–∞–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã—Ö –∏—Å—á–µ–∑–Ω–æ–≤–µ–Ω–∏—è—Ö. –°–µ–π—á–∞—Å –≤—ã —Å–∏–¥–∏—Ç–µ –≤ —Ç–∞–≤–µ—Ä–Ω–µ "–ü–ª—è—à—É—â–∏–π –¥—Ä–∞–∫–æ–Ω", –∏ –∫ –≤–∞–º –ø–æ–¥—Ö–æ–¥–∏—Ç –≤—Å—Ç—Ä–µ–≤–æ–∂–µ–Ω–Ω–∞—è –∂–µ–Ω—â–∏–Ω–∞...',
			},
			{
				player: '–Ø –≤—Å—Ç–∞—é –∏ –ø—Ä–∏–≥–ª–∞—à–∞—é –µ—ë –ø—Ä–∏—Å–µ—Å—Ç—å –∫ –Ω–∞–º –∑–∞ —Å—Ç–æ–ª.',
			},
			{
				dm: '–û–Ω–∞ –±–ª–∞–≥–æ–¥–∞—Ä–Ω–æ –∫–∏–≤–∞–µ—Ç. "–ú–µ–Ω—è –∑–æ–≤—É—Ç –ú–∞—Ä—Ç–∞, –∏ –º–Ω–µ –Ω—É–∂–Ω–∞ –≤–∞—à–∞ –ø–æ–º–æ—â—å. –ú–æ—è –¥–æ—á—å –≠–ª–∞—Ä–∞ –Ω–µ –≤–µ—Ä–Ω—É–ª–∞—Å—å –¥–æ–º–æ–π —Ç—Ä–µ—Ç—å—é –Ω–æ—á—å –ø–æ–¥—Ä—è–¥..."',
			},
		],
	},
	{
		title: '–ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ',
		icon: <SearchOutlined />,
		description:
			'–ò–≥—Ä–æ–∫–∏ –æ–±—â–∞—é—Ç—Å—è —Å NPC, —Å–æ–±–∏—Ä–∞—é—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é, –∏—Å—Å–ª–µ–¥—É—é—Ç –ª–æ–∫–∞—Ü–∏–∏ –∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Å–≤–æ–∏ –Ω–∞–≤—ã–∫–∏ –¥–ª—è —Ä–µ—à–µ–Ω–∏—è –∑–∞–≥–∞–¥–æ–∫. –≠—Ç–æ –æ—Å–Ω–æ–≤–Ω–∞—è —á–∞—Å—Ç—å —Ä–æ–ª–µ–≤–æ–π –∏–≥—Ä—ã.',
		example: [
			{
				player:
					'–Ø —Ö–æ—á—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ü—Ä–æ–Ω–∏—Ü–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å, —á—Ç–æ–±—ã –ø–æ–Ω—è—Ç—å, –≥–æ–≤–æ—Ä–∏—Ç –ª–∏ –æ–Ω–∞ –ø—Ä–∞–≤–¥—É.',
			},
			{
				dm: '–°–¥–µ–ª–∞–π –ø—Ä–æ–≤–µ—Ä–∫—É –ü—Ä–æ–Ω–∏—Ü–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.',
			},
			{
				player: '*–±—Ä–æ—Å–∞–µ—Ç d20* 18 –ø–ª—é—Å –º–æ–π –±–æ–Ω—É—Å... 22!',
			},
			{
				dm: '–¢—ã —á—É–≤—Å—Ç–≤—É–µ—à—å, —á—Ç–æ –æ–Ω–∞ –∞–±—Å–æ–ª—é—Ç–Ω–æ –∏—Å–∫—Ä–µ–Ω–Ω–∞ –∏ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –æ—Ç—á–∞—è–Ω–Ω–æ –∏—â–µ—Ç –ø–æ–º–æ—â–∏. –ë–æ–ª–µ–µ —Ç–æ–≥–æ, —Ç—ã –∑–∞–º–µ—á–∞–µ—à—å —Å—Ç—Ä–∞–Ω–Ω—ã–π —Å–∏–º–≤–æ–ª –Ω–∞ –µ—ë –º–µ–¥–∞–ª—å–æ–Ω–µ.',
			},
			{
				player: '–Ø —Å–ø—Ä–∞—à–∏–≤–∞—é –µ—ë –ø—Ä–æ –º–µ–¥–∞–ª—å–æ–Ω.',
			},
		],
	},
	{
		title: '–ë–æ–π',
		icon: <FireOutlined />,
		description:
			'–ù–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏–µ! –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –∏–Ω–∏—Ü–∏–∞—Ç–∏–≤–∞, –∏–≥—Ä–æ–∫–∏ –∏ –≤—Ä–∞–≥–∏ —Å–æ–≤–µ—Ä—à–∞—é—Ç —Ö–æ–¥—ã. –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏, –∑–∞–∫–ª–∏–Ω–∞–Ω–∏—è –∏ —Ç–∞–∫—Ç–∏–∫–∞. –≠—Ç–æ —Å–∞–º–∞—è –¥–∏–Ω–∞–º–∏—á–Ω–∞—è —á–∞—Å—Ç—å –∏–≥—Ä—ã.',
		example: [
			{
				dm: '–ö–æ–≥–¥–∞ –≤—ã –ø–æ–¥—Ö–æ–¥–∏—Ç–µ –∫ —Å—Ç–∞—Ä–æ–º—É –∫–ª–∞–¥–±–∏—â—É, –∏–∑ —Ç—É–º–∞–Ω–∞ –ø–æ—è–≤–ª—è—é—Ç—Å—è —Ç—Ä–∏ —Å–∫–µ–ª–µ—Ç–∞ –∏ –ø—Ä–∏–∑—Ä–∞–∫! –ë—Ä–æ—Å–∞–π—Ç–µ –∏–Ω–∏—Ü–∏–∞—Ç–∏–≤—É!',
			},
			{
				action: 'üé≤ –í—Å–µ –±—Ä–æ—Å–∞—é—Ç d20 + –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä –õ–æ–≤–∫–æ—Å—Ç–∏',
			},
			{
				player:
					'–£ –º–µ–Ω—è 19 –∏–Ω–∏—Ü–∏–∞—Ç–∏–≤—ã. –Ø –∏—Å–ø–æ–ª—å–∑—É—é –î–µ–π—Å—Ç–≤–∏–µ —Ä—ã–≤–∫–∞, —á—Ç–æ–±—ã –¥–æ–±–µ–∂–∞—Ç—å –¥–æ –ø—Ä–∏–∑—Ä–∞–∫–∞, –∏ –∞—Ç–∞–∫—É—é –µ–≥–æ —Å–≤–æ–∏–º –º–µ—á–æ–º!',
			},
			{
				action: '*–±—Ä–æ—Å–∞–µ—Ç d20* –ü–æ–ø–∞–ª! 16 –ø—Ä–æ—Ç–∏–≤ –µ–≥–æ –ö–ë.',
			},
			{
				dm: '–ü–æ–ø–∞–¥–∞–Ω–∏–µ! –ë—Ä–æ—Å—å —É—Ä–æ–Ω.',
			},
			{
				player: '*–±—Ä–æ—Å–∞–µ—Ç 1d8+3* 9 —Ä—É–±—è—â–µ–≥–æ —É—Ä–æ–Ω–∞!',
			},
			{
				dm: '–¢–≤–æ–π –º–µ—á –ø—Ä–æ—Ö–æ–¥–∏—Ç —Å–∫–≤–æ–∑—å –ø—Ä–∏–∑—Ä–∞—á–Ω—É—é —Ñ–æ—Ä–º—É, –∏ –æ–Ω–∞ –≤–∑–¥—Ä–∞–≥–∏–≤–∞–µ—Ç –æ—Ç –±–æ–ª–∏.',
			},
		],
	},
	{
		title: '–†–∞–∑–≤—è–∑–∫–∞',
		icon: <TrophyOutlined />,
		description:
			'–ë–æ–π –∑–∞–≤–µ—Ä—à—ë–Ω, —Ü–µ–ª–∏ –¥–æ—Å—Ç–∏–≥–Ω—É—Ç—ã. –ò–≥—Ä–æ–∫–∏ –ø–æ–ª—É—á–∞—é—Ç –Ω–∞–≥—Ä–∞–¥—ã: –æ–ø—ã—Ç, —Å–æ–∫—Ä–æ–≤–∏—â–∞, –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é. –ú–∞—Å—Ç–µ—Ä —Å–æ–∑–¥–∞—ë—Ç cliffhanger ‚Äî –∏–Ω—Ç—Ä–∏–≥—É—é—â–∏–π –º–æ–º–µ–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π –∑–∞–∏–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç –∏–≥—Ä–æ–∫–æ–≤ –∫ —Å–ª–µ–¥—É—é—â–µ–π —Å–µ—Å—Å–∏–∏.',
		example: [
			{
				dm: '–ü–æ—Å–ª–µ–¥–Ω–∏–π —Å–∫–µ–ª–µ—Ç —Ä–∞—Å—Å—ã–ø–∞–µ—Ç—Å—è –≤ –ø—Ä–∞—Ö. –í—ã –Ω–∞—Ö–æ–¥–∏—Ç–µ 50 –∑–æ–ª–æ—Ç—ã—Ö –∏ —Å—Ç—Ä–∞–Ω–Ω—ã–π –¥—Ä–µ–≤–Ω–∏–π —Å–≤–∏—Ç–æ–∫. –≠–ª–∞—Ä–∞ –±–ª–∞–≥–æ–¥–∞—Ä–∏—Ç –≤–∞—Å –∑–∞ —Å–ø–∞—Å–µ–Ω–∏–µ.',
			},
			{
				action: 'üí∞ –ì—Ä—É–ø–ø–∞ –ø–æ–ª—É—á–∞–µ—Ç 300 –æ–ø—ã—Ç–∞',
			},
			{
				player: '–Ø —Å–ø—Ä–∞—à–∏–≤–∞—é –≠–ª–∞—Ä—É, —á—Ç–æ –æ–Ω–∞ –ø–æ–º–Ω–∏—Ç.',
			},
			{
				dm: '–û–Ω–∞ –≥–æ–≤–æ—Ä–∏—Ç –¥—Ä–æ–∂–∞—â–∏–º –≥–æ–ª–æ—Å–æ–º: "–Ø –Ω–∏—á–µ–≥–æ –Ω–µ –ø–æ–º–Ω—é... –Ω–æ —É –º–µ–Ω—è —Ç–µ–ø–µ—Ä—å –µ—Å—Ç—å —ç—Ç–∞ –º–µ—Ç–∫–∞." –û–Ω–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤–∞–º —Ä—É–∫—É ‚Äî –Ω–∞ –Ω–µ–π —Å–≤–µ—Ç–∏—Ç—Å—è —Å—Ç—Ä–∞–Ω–Ω—ã–π –º–∞–≥–∏—á–µ—Å–∫–∏–π —Å–∏–º–≤–æ–ª.',
			},
			{
				action: '‚è∏Ô∏è Cliffhanger –¥–ª—è —Å–ª–µ–¥—É—é—â–µ–π —Å–µ—Å—Å–∏–∏!',
			},
		],
	},
];

export const GameplayGuide: React.FC = () => {
	const [current, setCurrent] = useState(0);

	const next = () => {
		setCurrent(current + 1);
	};

	const prev = () => {
		setCurrent(current - 1);
	};

	const currentStep = gameSteps[current];

	return (
		<div className="gameplay-guide">
			<Steps current={current} className="gameplay-steps">
				{gameSteps.map((step, index) => (
					<Step key={index} title={step.title} icon={step.icon} />
				))}
			</Steps>

			<AnimatePresence mode="wait">
				<motion.div
					key={current}
					initial={{ opacity: 0, y: 20 }}
					animate={{ opacity: 1, y: 0 }}
					exit={{ opacity: 0, y: -20 }}
					transition={{ duration: 0.4 }}
					className="step-content"
				>
					<Card className="step-card" bordered={false}>
						<div className="step-header">
							<div className="step-icon-large">{currentStep.icon}</div>
							<h2>{currentStep.title}</h2>
						</div>
						<p className="step-description">{currentStep.description}</p>

						<div className="step-example">
							<h3>üìñ –ü—Ä–∏–º–µ—Ä –∏–≥—Ä—ã:</h3>
							<div className="dialogue">
								{currentStep.example.map((line, index) => (
									<motion.div
										key={index}
										initial={{ opacity: 0, x: -10 }}
										animate={{ opacity: 1, x: 0 }}
										transition={{ delay: index * 0.1 }}
										className={
											line.dm
												? 'dialogue-dm'
												: line.player
												? 'dialogue-player'
												: 'dialogue-action'
										}
									>
										{line.dm && (
											<>
												<strong className="speaker">üé≠ –ú–∞—Å—Ç–µ—Ä:</strong>{' '}
												<span>{line.dm}</span>
											</>
										)}
										{line.player && (
											<>
												<strong className="speaker">üé≤ –ò–≥—Ä–æ–∫:</strong>{' '}
												<span>{line.player}</span>
											</>
										)}
										{line.action && <span className="action-text">{line.action}</span>}
									</motion.div>
								))}
							</div>
						</div>
					</Card>

					<Space className="step-navigation" size="middle">
						<Button
							icon={<LeftOutlined />}
							onClick={prev}
							disabled={current === 0}
							size="large"
						>
							–ù–∞–∑–∞–¥
						</Button>
						{current < gameSteps.length - 1 ? (
							<Button type="primary" onClick={next} size="large">
								–î–∞–ª–µ–µ <RightOutlined />
							</Button>
						) : (
							<Button type="primary" href="/docs/intro" size="large">
								–ö –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ <RightOutlined />
							</Button>
						)}
					</Space>
				</motion.div>
			</AnimatePresence>
		</div>
	);
};

export default GameplayGuide;

